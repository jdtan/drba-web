"use strict";var blogty=blogty||{};function blogtyDomReady(e){if("function"==typeof e){if("interactive"===document.readyState||"complete"===document.readyState)return e();document.addEventListener("DOMContentLoaded",e,!1)}}blogty.traverseMenu={init:function(){let e=document.querySelector(".blogty-top-nav"),t=document.getElementById("site-navigation");e&&this.traverse(e),t&&this.traverse(t)},traverse:function(e){let t=e.getElementsByTagName("ul")[0];if(void 0!==t){t.classList.contains("nav-menu")||t.classList.add("nav-menu");let a=t.getElementsByTagName("a"),s=t.querySelectorAll(".menu-item-has-children > a, .page_item_has_children > a");for(let i of a)i.addEventListener("focus",this.toggleFocus,!0),i.addEventListener("blur",this.toggleFocus,!0);for(let o of s)o.addEventListener("touchstart",this.toggleFocus,!1)}},toggleFocus:function(e){if("focus"===e.type||"blur"===e.type){let t=this;for(;!t.classList.contains("nav-menu");)"li"===t.tagName.toLowerCase()&&t.classList.toggle("focus"),t=t.parentNode}if("touchstart"===e.type){let a=this.parentNode;for(let s of(e.preventDefault(),a.parentNode.children))a!==s&&s.classList.remove("focus");a.classList.toggle("focus")}}},blogty.handleFocus={init:function(){this.keepFocusInModal()},keepFocusInModal:function(){let e=document.querySelectorAll(".blogty-canvas-modal");document.addEventListener("keydown",function(t){("Tab"===t.key||9===t.keyCode)&&e&&e.forEach(function(e){let a=e.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="search"]:not([disabled]), input[type="submit"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])'),s=a[0],i=a[a.length-1];t.shiftKey?document.activeElement===s&&(i.focus(),t.preventDefault()):document.activeElement===i&&(s.focus(),t.preventDefault())})})}},blogty.fadeOutPreloader={init:function(){let e=document.querySelector("#blogty-preloader-wrapper");e&&(e.classList.add("fadeOut"),setTimeout(function(){e.style.display="none"},1e3))}},blogty.scrollToTop={init:function(){let e=document.documentElement,t=this,a=document.querySelectorAll(".blogty-toggle-scroll-top");a&&a.forEach(function(a){t.goToTop(a,e)});let s=document.querySelectorAll(".blogty-floating-scroll-top");s&&s.forEach(function(a){t.scrollToTopPosition(a,e)})},goToTop:function(e,t){e.addEventListener("click",function(e){e.preventDefault(),t.scrollTo({top:0,behavior:"smooth"})})},scrollToTopPosition:function(e,t){window.addEventListener("scroll",function(a){let s=t.scrollHeight-t.clientHeight;t.scrollTop/s>.4?e.classList.add("visible"):e.classList.remove("visible")})}},blogty.stickyMenu={init:function(){let e=document.querySelector(".blogty-primary-bar-row.sticky-menu");if(e){let t=e.offsetTop;e.style.height="auto";let a=e.getBoundingClientRect().height;a>1?e.style.height=(a+.1).toFixed(2)+"px":e.style.height="auto",window.addEventListener("resize",function(a){t=e.offsetTop,e.style.height="auto";let s=e.getBoundingClientRect().height;s>1?e.style.height=(s+.1).toFixed(2)+"px":e.style.height="auto"}),window.addEventListener("scroll",function(a){window.pageYOffset>t?e.classList.add("has-menu-sticked"):e.classList.remove("has-menu-sticked")})}}},blogty.subMenuToggle={init:function(){let e=document.querySelectorAll(".sub-menu-toggle");e&&e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("active"),this.setAttribute("aria-selected",`${"true"!==this.getAttribute("aria-selected")}`);let t=this.getAttribute("data-toggle-target");t&&document.querySelector(t).classList.toggle("active")})})}},blogty.CanvasModal={init:function(){document.querySelector(".toggle-canvas-modal")&&(this.onOpen(),this.onClose(),this.outsideModal(),this.closeOnEscape())},onOpen:function(){document.querySelectorAll(".toggle-canvas-modal").forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),document.body.classList.add("canvas-modal-is-open"),document.body.classList.add(this.getAttribute("data-body-class")),e.classList.add("active"),e.setAttribute("aria-expanded",!0);let a=this.getAttribute("data-focus");a&&setTimeout(function(){document.querySelector(a).focus()},500)})})},onClose:function(){document.querySelectorAll(".close-canvas-modal").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),this.hideModal()}).bind(this))}).bind(this))},outsideModal:function(){document.addEventListener("click",(function(e){if(document.body.classList.contains("canvas-modal-is-open")){let t=document.querySelector("#page.site");e.target==t&&this.hideModal()}}).bind(this))},closeOnEscape:function(){document.addEventListener("keydown",(function(e){"Escape"===e.key&&(e.preventDefault(),this.hideModal())}).bind(this))},hideModal:function(){document.body.classList.remove("canvas-modal-is-open");let e=document.querySelector(".toggle-canvas-modal.active");if(e){document.body.classList.remove(e.getAttribute("data-body-class"));let t=e.getAttribute("data-focus");t&&document.querySelector(t).blur(),e.setAttribute("aria-expanded",!1),e.focus(),e.classList.remove("active")}}},blogty.SearchBlock={isToggled:!1,init:function(){document.querySelector(".toggle-search-block")&&(this.toggleSearchBlock(),this.closeOnEscape())},toggleSearchBlock:function(){let e=this;document.querySelectorAll(".toggle-search-block").forEach(function(t){t.addEventListener("click",function(a){if(a.preventDefault(),e.isToggled=!e.isToggled,e.isToggled){document.body.classList.add("search-block-is-open"),document.body.classList.add(this.getAttribute("data-body-class")),t.classList.add("active"),t.parentNode.classList.add("active"),t.setAttribute("aria-expanded",!0);let s=this.getAttribute("data-focus");s&&setTimeout(function(){t.parentNode.querySelector(s).focus()},500),setTimeout(function(){e.outsideBlock()},100)}else e.hideBlock()})})},closeOnEscape:function(){let e=this;document.addEventListener("keydown",function(t){"Escape"===t.key&&(t.preventDefault(),e.hideBlock())})},outsideBlock:function(){document.addEventListener("click",this.handleClickOutsideBox)},handleClickOutsideBox:function(e){document.body.classList.contains("search-block-is-open")&&(document.querySelector(".blogty-search-toggle.active .em-search-form-inner").contains(e.target)||blogty.SearchBlock.hideBlock())},hideBlock:function(){let e=this;document.body.classList.remove("search-block-is-open");let t=document.querySelector(".toggle-search-block.active");if(t){document.body.classList.remove(t.getAttribute("data-body-class"));let a=t.getAttribute("data-focus");a&&t.parentNode.querySelector(a).blur(),t.setAttribute("aria-expanded",!1),t.focus(),t.classList.remove("active"),t.parentNode.classList.remove("active"),document.removeEventListener("click",e.handleClickOutsideBox),e.isToggled=!1}}},blogty.setBackgroundImage={init:function(){let e=document.querySelectorAll(".blogty-bg-image");e&&e.forEach(function(e){let t=e.querySelector("img");if(t){let a=t.getAttribute("src");a&&(e.style.backgroundImage="url("+a+")",t.style.display="none")}})}},blogty.progressBar={init:function(){let e=document.getElementById("blogty-progress-bar");if(e){let t=document.body,a=document.documentElement;window.addEventListener("scroll",function(s){let i=t.scrollTop||a.scrollTop,o=a.scrollHeight-a.clientHeight;e.style.width=i/o*100+"%"})}}},blogty.slider={init:function(){this.bannerSlider(),this.widgetSlider()},bannerSlider:function(){let e=document.querySelector(".blogty-banner-wrapper");if(e){let t,a=e.getAttribute("data-banner")||{};a&&(t=JSON.parse(a));let s={loop:!0,...t};new Swiper(e,s)}},widgetSlider:function(){let e=document.querySelectorAll(".blogty-slider-wrapper-block .swiper");e&&e.forEach(function(e){let t=e.parentNode,a=t.querySelector(".swiper-button-next"),s=t.querySelector(".swiper-button-prev"),i=t.querySelector(".swiper-pagination"),o=e.getAttribute("data-slider")||{};if(o)var n=JSON.parse(o);let l={slidesPerView:1,lazyloading:!0,navigation:{nextEl:a,prevEl:s},pagination:{el:i,clickable:!0},...n},c=new Swiper(e,l);e.clientWidth<500&&(c.params.slidesPerView=1,c.update())})}},blogty.tabs={init:function(){let e=document.querySelectorAll("[data-toggle='uf-tab']");e&&e.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();let a=[...e.parentNode.children],s=[...e.parentNode.nextElementSibling.children,];a.forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-selected","false")}),s.forEach(e=>{e.classList.remove("active")});let i=e.getAttribute("aria-controls"),o=document.getElementById(i);e.classList.add("active"),e.setAttribute("aria-selected","true"),o.classList.add("active")})})}},blogtyDomReady(function(){blogty.stickyMenu.init(),blogty.subMenuToggle.init(),blogty.traverseMenu.init(),blogty.handleFocus.init(),blogty.CanvasModal.init(),blogty.SearchBlock.init(),blogty.scrollToTop.init(),blogty.setBackgroundImage.init(),blogty.progressBar.init(),blogty.slider.init(),blogty.tabs.init()}),window.addEventListener("load",function(e){blogty.fadeOutPreloader.init()}),function(e){var t=t||{};let a,s,i,o,n,l=e(".blogty-load-posts-btn-wrapper"),c=e(".blogty-ajax-load-btn"),r=e(".blogty-ajax-loader");l.length>0&&(s=(a=parseInt(l.attr("data-page")))+1,i=parseInt(l.attr("data-max-pages")),o=l.attr("data-load-type"),n=l.closest("#primary").attr("data-template"));let d=!0;function u(){e.ajax({type:"POST",url:BlogtyVars.ajaxurl,data:{action:"blogty_load_posts",load_post_nonce:BlogtyVars.load_post_nonce,query_vars:BlogtyVars.query_vars,page:s,template:n},dataType:"json",beforeSend:function(){c.addClass("loading-posts"),r.addClass("active"),d=!1},success:function(n){if(n.success){let l=n.data.content.join(""),u=e(l);u.hide(),e(".blogty-posts-lists").append(u),l.indexOf("blogty-bg-image")>=0&&t.setBackgroundImage.init(),u.fadeIn(),a=s,++s<=i?"button_click_load"==o&&setTimeout(function(){r.removeClass("active"),c.removeClass("loading-posts")},500):c.fadeOut(),d=!0,e(document.body).trigger("posts-loaded")}else r.removeClass("active")}})}t.loadMorePosts={fetchPostsOnClick:function(){c.on("click",function(e){e.preventDefault(),d&&u()})},fetchPostsOnScroll:function(){let t=l.offset().top-e(window).scrollTop();s<=i&&700>t&&d&&u()}},e(document).ready(function(){l.length>0&&("button_click_load"==o&&t.loadMorePosts.fetchPostsOnClick(),"infinite_scroll_load"==o&&e(window).scroll(function(){t.loadMorePosts.fetchPostsOnScroll()}))})}(jQuery);