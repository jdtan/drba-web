"use strict";var blogty=blogty||{};function blogtyDomReady(t){if("function"==typeof t){if("interactive"===document.readyState||"complete"===document.readyState)return t();document.addEventListener("DOMContentLoaded",t,!1)}}blogty.traverseMenu={init:function(){let t=document.querySelector(".blogty-top-nav"),e=document.getElementById("site-navigation");t&&this.traverse(t),e&&this.traverse(e)},traverse:function(t){let e=t.getElementsByTagName("ul")[0];if(void 0!==e){e.classList.contains("nav-menu")||e.classList.add("nav-menu");let o=e.getElementsByTagName("a"),i=e.querySelectorAll(".menu-item-has-children > a, .page_item_has_children > a");for(let l of o)l.addEventListener("focus",this.toggleFocus,!0),l.addEventListener("blur",this.toggleFocus,!0);for(let n of i)n.addEventListener("touchstart",this.toggleFocus,!1)}},toggleFocus:function(t){if("focus"===t.type||"blur"===t.type){let e=this;for(;!e.classList.contains("nav-menu");)"li"===e.tagName.toLowerCase()&&e.classList.toggle("focus"),e=e.parentNode}if("touchstart"===t.type){let o=this.parentNode;for(let i of(t.preventDefault(),o.parentNode.children))o!==i&&i.classList.remove("focus");o.classList.toggle("focus")}}},blogty.handleFocus={init:function(){this.keepFocusInModal()},keepFocusInModal:function(){let t=document.querySelectorAll(".blogty-canvas-modal");document.addEventListener("keydown",function(e){("Tab"===e.key||9===e.keyCode)&&t&&t.forEach(function(t){let o=t.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="search"]:not([disabled]), input[type="submit"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])'),i=o[0],l=o[o.length-1];e.shiftKey?document.activeElement===i&&(l.focus(),e.preventDefault()):document.activeElement===l&&(i.focus(),e.preventDefault())})})}},blogty.fadeOutPreloader={init:function(){let t=document.querySelector("#blogty-preloader-wrapper");t&&(t.classList.add("fadeOut"),setTimeout(function(){t.style.display="none"},1e3))}},blogty.scrollToTop={init:function(){let t=document.documentElement,e=this,o=document.querySelectorAll(".blogty-toggle-scroll-top");o&&o.forEach(function(o){e.goToTop(o,t)});let i=document.querySelectorAll(".blogty-floating-scroll-top");i&&i.forEach(function(o){e.scrollToTopPosition(o,t)})},goToTop:function(t,e){t.addEventListener("click",function(t){t.preventDefault(),e.scrollTo({top:0,behavior:"smooth"})})},scrollToTopPosition:function(t,e){window.addEventListener("scroll",function(o){let i=e.scrollHeight-e.clientHeight;e.scrollTop/i>.4?t.classList.add("visible"):t.classList.remove("visible")})}},blogty.stickyMenu={stickyPoint:"",init:function(){let t=this,e=document.querySelector(".blogty-primary-bar-row.sticky-menu");e&&(t.stickyPoint=e.offsetTop,t.updateMenuHeight(e),window.addEventListener("resize",function(o){t.stickyPoint=e.offsetTop,t.updateMenuHeight(e)}),window.addEventListener("scroll",function(o){window.pageYOffset>t.stickyPoint?e.classList.add("has-menu-sticked"):e.classList.remove("has-menu-sticked")}))},updateMenuHeight:function(t){t.style.height="unset";let e=t.getBoundingClientRect().height;e>1?t.style.height=(e+.1).toFixed(2)+"px":t.style.height="unset"}},blogty.subMenuToggle={init:function(){let t=document.querySelectorAll(".sub-menu-toggle");t&&t.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),this.classList.toggle("active"),this.setAttribute("aria-selected",`${"true"!==this.getAttribute("aria-selected")}`);let e=this.getAttribute("data-toggle-target");e&&document.querySelector(e).classList.toggle("active")})})}},blogty.CanvasModal={init:function(){document.querySelector(".toggle-canvas-modal")&&(this.onOpen(),this.onClose(),this.outsideModal(),this.closeOnEscape())},onOpen:function(){document.querySelectorAll(".toggle-canvas-modal").forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),document.body.classList.add("canvas-modal-is-open"),document.body.classList.add(this.getAttribute("data-body-class")),t.classList.add("active"),t.setAttribute("aria-expanded",!0);let o=this.getAttribute("data-focus");o&&setTimeout(function(){document.querySelector(o).focus()},500)})})},onClose:function(){document.querySelectorAll(".close-canvas-modal").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),this.hideModal()}).bind(this))}).bind(this))},outsideModal:function(){document.addEventListener("click",(function(t){if(document.body.classList.contains("canvas-modal-is-open")){let e=document.querySelector("#page.site");t.target==e&&this.hideModal()}}).bind(this))},closeOnEscape:function(){document.addEventListener("keydown",(function(t){"Escape"===t.key&&(t.preventDefault(),this.hideModal())}).bind(this))},hideModal:function(){document.body.classList.remove("canvas-modal-is-open");let t=document.querySelector(".toggle-canvas-modal.active");if(t){document.body.classList.remove(t.getAttribute("data-body-class"));let e=t.getAttribute("data-focus");e&&document.querySelector(e).blur(),t.setAttribute("aria-expanded",!1),t.focus(),t.classList.remove("active")}}},blogty.SearchBlock={isToggled:!1,init:function(){document.querySelector(".toggle-search-block")&&(this.toggleSearchBlock(),this.closeOnEscape())},toggleSearchBlock:function(){let t=this;document.querySelectorAll(".toggle-search-block").forEach(function(e){e.addEventListener("click",function(o){if(o.preventDefault(),t.isToggled=!t.isToggled,t.isToggled){document.body.classList.add("search-block-is-open"),document.body.classList.add(this.getAttribute("data-body-class")),e.classList.add("active"),e.parentNode.classList.add("active"),e.setAttribute("aria-expanded",!0);let i=this.getAttribute("data-focus");i&&setTimeout(function(){e.parentNode.querySelector(i).focus()},500),setTimeout(function(){t.outsideBlock()},100)}else t.hideBlock()})})},closeOnEscape:function(){let t=this;document.addEventListener("keydown",function(e){"Escape"===e.key&&(e.preventDefault(),t.hideBlock())})},outsideBlock:function(){document.addEventListener("click",this.handleClickOutsideBox)},handleClickOutsideBox:function(t){document.body.classList.contains("search-block-is-open")&&(document.querySelector(".blogty-search-toggle.active .em-search-form-inner").contains(t.target)||blogty.SearchBlock.hideBlock())},hideBlock:function(){let t=this;document.body.classList.remove("search-block-is-open");let e=document.querySelector(".toggle-search-block.active");if(e){document.body.classList.remove(e.getAttribute("data-body-class"));let o=e.getAttribute("data-focus");o&&e.parentNode.querySelector(o).blur(),e.setAttribute("aria-expanded",!1),e.focus(),e.classList.remove("active"),e.parentNode.classList.remove("active"),document.removeEventListener("click",t.handleClickOutsideBox),t.isToggled=!1}}},blogty.setBackgroundImage={init:function(){let t=document.querySelectorAll(".blogty-bg-image");t&&t.forEach(function(t){let e=t.querySelector("img");if(e){let o=e.getAttribute("src");o&&(t.style.backgroundImage="url("+o+")",e.style.display="none")}})}},blogty.progressBar={init:function(){let t=document.getElementById("blogty-progress-bar");if(t){let e=document.body,o=document.documentElement;window.addEventListener("scroll",function(i){let l=e.scrollTop||o.scrollTop,n=o.scrollHeight-o.clientHeight;t.style.width=l/n*100+"%"})}}},blogty.slider={init:function(){this.bannerSlider(),this.widgetSlider()},bannerSlider:function(){let t=document.querySelector(".blogty-banner-wrapper");if(t){let e,o=t.getAttribute("data-banner")||{};o&&(e=JSON.parse(o));let i={loop:!0,...e};new Swiper(t,i)}},widgetSlider:function(){let t=document.querySelectorAll(".blogty-slider-wrapper-block .swiper");t&&t.forEach(function(t){let e=t.parentNode,o=e.querySelector(".swiper-button-next"),i=e.querySelector(".swiper-button-prev"),l=e.querySelector(".swiper-pagination"),n=t.getAttribute("data-slider")||{};if(n)var s=JSON.parse(n);let a={slidesPerView:1,lazyloading:!0,navigation:{nextEl:o,prevEl:i},pagination:{el:l,clickable:!0},...s},c=new Swiper(t,a);t.clientWidth<500&&(c.params.slidesPerView=1,c.update())})}},blogty.tabs={init:function(){let t=document.querySelectorAll("[data-toggle='uf-tab']");t&&t.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault();let o=[...t.parentNode.children],i=[...t.parentNode.nextElementSibling.children,];o.forEach(t=>{t.classList.remove("active"),t.setAttribute("aria-selected","false")}),i.forEach(t=>{t.classList.remove("active")});let l=t.getAttribute("aria-controls"),n=document.getElementById(l);t.classList.add("active"),t.setAttribute("aria-selected","true"),n.classList.add("active")})})}},blogtyDomReady(function(){blogty.stickyMenu.init(),blogty.subMenuToggle.init(),blogty.traverseMenu.init(),blogty.handleFocus.init(),blogty.CanvasModal.init(),blogty.SearchBlock.init(),blogty.scrollToTop.init(),blogty.setBackgroundImage.init(),blogty.progressBar.init(),blogty.slider.init(),blogty.tabs.init()}),window.addEventListener("load",function(t){blogty.fadeOutPreloader.init()}),function(t){var e=e||{};let o,i,l,n,s,a=t(".blogty-load-posts-btn-wrapper"),c=t(".blogty-ajax-load-btn"),r=t(".blogty-ajax-loader");a.length>0&&(i=(o=parseInt(a.attr("data-page")))+1,l=parseInt(a.attr("data-max-pages")),n=a.attr("data-load-type"),s=a.closest("#primary").attr("data-template"));let d=!0;function u(){t.ajax({type:"POST",url:BlogtyVars.ajaxurl,data:{action:"blogty_load_posts",load_post_nonce:BlogtyVars.load_post_nonce,query_vars:BlogtyVars.query_vars,page:i,template:s},dataType:"json",beforeSend:function(){c.addClass("loading-posts"),r.addClass("active"),d=!1},success:function(s){if(s.success){let a=s.data.content.join(""),u=t(a);u.hide(),t(".blogty-posts-lists").append(u),a.indexOf("blogty-bg-image")>=0&&e.setBackgroundImage.init(),u.fadeIn(),o=i,++i<=l?"button_click_load"==n&&setTimeout(function(){r.removeClass("active"),c.removeClass("loading-posts")},500):c.fadeOut(),d=!0,t(document.body).trigger("posts-loaded")}else r.removeClass("active")}})}e.loadMorePosts={fetchPostsOnClick:function(){c.on("click",function(t){t.preventDefault(),d&&u()})},fetchPostsOnScroll:function(){let e=a.offset().top-t(window).scrollTop();i<=l&&700>e&&d&&u()}},t(document).ready(function(){a.length>0&&("button_click_load"==n&&e.loadMorePosts.fetchPostsOnClick(),"infinite_scroll_load"==n&&t(window).scroll(function(){e.loadMorePosts.fetchPostsOnScroll()}))})}(jQuery);